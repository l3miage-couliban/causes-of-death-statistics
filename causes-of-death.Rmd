---
title: "Causes of death in the world"
author: "N'Djo-Soro Coulibaly, Ciré Keïta, Higo Aragao, Thi Tran"
date: "2024-03-05"
output:
  pdf_document: default
  html_document:
    df_print: paged
---

## Context of the problem
  Il est question d'analyser des données concernant les causes de mortalité dans le monde. Pour mener à bien cette analyse, nous avons defini des questions sur lesquelles travailler:
  2) Les 10 principales causes de mort dans le monde ? 
    - Quelle décision prendre à partir du résultat
  3) Les 5 principales causes sur chaque continent ? 
  4) L'évolution des décès au fil des années (2007 - 2019) ?
  5) representation graphique map
  6) Ajout des données démographiques


## Comment les données ont-elles été recuillies ?
Les données proviennent de Our World In Data
Source: https://www.kaggle.com/datasets/ivanchvez/causes-of-death-our-world-in-data



D'autres questions pourront être ajoutées au fur et à mesure pour plus de précisions et d'interprétations


## Read Dataset

```{r}
library(tidyverse)

CausesData <- read_csv("20222703-causes-f-death-clean-output-v2.0.csv") %>%
  rename(iso_code=Code) %>%
  filter(Year %in% 1990:2019) %>%
  filter(!is.na(iso_code));
```


```{r}
CountriesData <- read_csv("owid-co2-data.csv") %>%
  select(year, iso_code, population, gdp) %>%
  filter(year %in% 1990:2019) %>%
  filter(!is.na(iso_code));
```

```{r}
ContinentsData <- read_csv("continents2.csv") %>%
  select('alpha-3', region) %>%
  rename(iso_code='alpha-3') %>%
  filter(!is.na(region));
```

## join both dataframes
```{r}
#data <- merge(CausesData, CountriesData, by="iso_code");
data <- left_join(CausesData, CountriesData, by=c("iso_code"="iso_code", "Year"="year")) %>%
  left_join(ContinentsData, by=c("iso_code"="iso_code")) %>%
  arrange(Year);
```


## 10 firsts Number of deaths by cause
%>%
  group_by(`Causes name`) %>%
  summarize(n=sum(as.numeric(`Death Numbers`)))
  
```{r}
ndc <- data %>%
  filter(!is.na(iso_code)) %>%
  filter(!is.na(`Death Numbers`)) %>%
  group_by(`Causes name`) %>%
  summarize(`Death Numbers`=sum(as.numeric(`Death Numbers`))) %>%
  arrange(desc(`Death Numbers`)) %>%
  top_n(10)
```

## 5 firsts causes of death on each continent
```{r}
area <- data %>%
  filter(is.na(iso_code))
  filter(Entity="")
```

#### MES MODIFICATIONS

## L'évolution de la Population en fonction des Continents

## Africa
```{r}
africa <- data %>%
filter(region == "Africa")  %>%
group_by(Year) %>%
distinct(population, Entity) %>%
summarise(populationTotal = sum(population))
ggplot(data  = africa, shape = populationTotal) +
  aes(x = Year) +
  aes(y = populationTotal / 10000000) +
  aes(color = populationTotal) +
  geom_line() +
  scale_x_continuous(breaks = seq(1990,2019, by = 2))

```
  
## America
```{r}
america <- data %>%
filter(region == "Americas")  %>%
group_by(Year) %>%
distinct(population, Entity) %>%
summarise(populationTotal = sum(population))
ggplot(data  = america, shape = populationTotal) +
  aes(x = Year) +
  aes(y = populationTotal / 10000000) +
  aes(color = populationTotal) +
  geom_line() +
  scale_x_continuous(breaks = seq(1990,2019, by = 2))

```


## Europe
```{r}
europe <- data %>%
filter(region == "Europe")  %>%
group_by(Year) %>%
distinct(population, Entity) %>%
filter(!is.na(population)) %>%
summarise(populationTotal = sum(population))
ggplot(data  = europe, shape = populationTotal) +
  aes(x = Year) +
  aes(y = populationTotal ) +
  aes(color = populationTotal) +
  geom_line() +
  scale_x_continuous(breaks = seq(1990,2019, by = 2))

```
## Asia
```{r}
asia <- data %>%
filter(region == "Asia")  %>%
group_by(Year) %>%
distinct(population, Entity) %>%
summarise(populationTotal = sum(population))
ggplot(data  = asia, shape = populationTotal) +
  aes(x = Year) +
  aes(y = populationTotal / 10000000) +
  aes(color = populationTotal) +
  geom_line() +
  scale_x_continuous(breaks = seq(1990,2019, by = 2))

```

